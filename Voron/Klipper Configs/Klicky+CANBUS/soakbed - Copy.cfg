[gcode_macro SOAK_BED]
description: Wait for secondary temperature sensor to achive N degrees from requested temperature
variable_offset_degrees_pct:	0.95            ; Temperature offset from bed temperature before releasing wait in percent
gcode:
    {% set BED_TEMP = printer.heater_bed.target|float %}
    {% set BED_SOAK_GOAL = BED_TEMP*offset_degrees_pct %}

	{% if BED_TEMP != 0 %}
		{action_respond_info("Target Bed: %.1f" % (BED_TEMP))}
		{action_respond_info("Waiting for Bed Sensor: %.1f" % (BED_SOAK_GOAL))}
	
		TEMPERATURE_WAIT SENSOR="temperature_sensor bed2" MINIMUM={BED_SOAK_GOAL}
	
	{% else %}
		{action_respond_info("Bed temperature not set")}
	{% endif %}